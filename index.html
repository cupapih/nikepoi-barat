<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nekopara</title>
  <meta name="description" content="Bokep indonesia, bokep jepang, bokep barat, konten viral terbaru, bokep viral terbaru, bokep terbaru, bokep terlengkap tanpa vpn, bokep jepang terbaru , bokep indo terbaru, keylapoi bokep, bokep omek, bokep lesbi, bokep ngewe, ngewe viral">
  <meta name="keywords" content="Bokep indonesia, bokep jepang, bokep barat, konten viral terbaru, bokep viral terbaru, bokep terbaru, bokep terlengkap tanpa vpn, bokep jepang terbaru , bokep indo terbaru, keylapoi bokep, bokep omek, bokep lesbi, bokep ngewe, ngewe viral">
  <meta name="author" content="nekopara">
  <meta name="theme-color" content="#000000">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<nav class="navbar">
  <div class="logo">Nekopara</div>
  <div style="display: flex; align-items: center; gap: 10px;">
    <form id="searchForm" onsubmit="searchPosts(event)" style="display: flex; align-items: center;">
      <input type="text" id="searchInput" placeholder="Cari..." style="padding: 3px 5px; border-radius: 2px 0 0 2px; border: 1px solid #ccc; font-size: 14px;">
      <button type="submit" style="padding: 6px 10px; border: none; background: #007bff; color: #fff; border-radius: 0 4px 4px 0; cursor: pointer;">
        <i class="fas fa-search"></i>
      </button>
    </form>
    <button id="refreshBtn" onclick="manualRefresh()" style="padding: 8px 12px; font-size: 14px; border: none; background-color: #007bff; color: white; border-radius: 5px; cursor: pointer;">
      <i class="fas fa-sync-alt"></i>
    </button>
    <button id="clearCacheBtn" onclick="clearServiceWorkerCache()" style="padding: 8px 12px; font-size: 14px; border: none; background-color: #dc3545; color: white; border-radius: 5px; cursor: pointer;">
      <i class="fas fa-trash-alt"></i>
    </button>
    <button class="img/hamburger" onclick="toggleMenu()">
      <img src="img/hamburger_menu.svg" alt="Menu" width="30">
    </button>
  </div>
  <ul class="nav-menu" id="navMenu">
    <button class="close-menu" onclick="toggleMenu()">
      <img src="img/close_icon.svg" alt="Close" width="30">
    </button>
    <li><a href="#beranda" onclick="filterPosts('all')">Halaman utama</a></li>
    <li><a href="#local" onclick="filterPosts('local')">Bokep local</a></li>
    <li><a href="#asia" onclick="filterPosts('asia')">Bokep asia</a></li>
    <li><a href="#barat" onclick="filterPosts('barat')">Bokep barat</a></li>
    <li><a href="#local_random" onclick="filterPosts('local_random')">Bokep Random local</a></li>
    <li><a href="#asia_random" onclick="filterPosts('asia_random')">Bokep Random asia</a></li>
    <li><a href="#barat_random" onclick="filterPosts('barat_random')">Bokep Random Barat</a></li>
    <li><a href="#jav" onclick="filterPosts('jav')">JAV Sub indo</a></li>
  </ul>
</nav>

<main class="grid-container" id="postGrid"></main>

<div class="pagination">
  <button id="prevBtn" onclick="prevPage()"><i class="fas fa-arrow-left"></i> Previous</button>
  <button id="nextBtn" onclick="nextPage()">Next <i class="fas fa-arrow-right"></i></button>
</div>

<div id="overlay" class="overlay" onclick="closeOverlay(event)">
  <div class="overlay-content" id="overlayContent"></div>
  <button class="close-btn" onclick="closeOverlay(event)">Tutup</button>
</div>

<footer class="site-footer">
  <p>
    Hak cipta Nekopara. Di larang mengambil content tanpa izin.
    content dewasa pastikan jauhkan dari anak-anak
  </p>
</footer>

<script src="js/script.js"></script>
<script>
  // ðŸ”¹ Fetch index.json dari luar folder data
  fetch("index.json")
    .then(res => res.json())
    .then(data => {
      window.allPosts = data.files; // simpan semua file global
      currentPage = 1;
      postsPerPage = 10;
      displayPage(currentPage);
    })
    .catch(err => console.error("Gagal membaca index.json:", err));

  // ðŸ”¹ Fungsi untuk menampilkan file di grid
  let currentPage = 1;
  let postsPerPage = 10;

  function displayPage(page) {
    const grid = document.getElementById("postGrid");
    grid.innerHTML = "";

    const start = (page - 1) * postsPerPage;
    const end = start + postsPerPage;
    const pagePosts = window.allPosts.slice(start, end);

    pagePosts.forEach(item => {
      const filePath = "data/" + item.file;
      const div = document.createElement("div");
      div.classList.add("card");
      div.innerHTML = `
        <h3>${item.file}</h3>
        <button onclick="showOverlay('${filePath}')">Lihat</button>
      `;
      grid.appendChild(div);
    });
  }

  function nextPage() {
    if (currentPage * postsPerPage < window.allPosts.length) {
      currentPage++;
      displayPage(currentPage);
    }
  }

  function prevPage() {
    if (currentPage > 1) {
      currentPage--;
      displayPage(currentPage);
    }
  }

  function showOverlay(filePath) {
    const overlay = document.getElementById("overlay");
    const content = document.getElementById("overlayContent");
    overlay.style.display = "flex";
    fetch(filePath)
      .then(res => res.text())
      .then(txt => {
        content.innerHTML = `<pre>${txt}</pre>`;
      });
  }

  function closeOverlay(event) {
    if (event.target.id === "overlay" || event.target.classList.contains("close-btn")) {
      document.getElementById("overlay").style.display = "none";
    }
  }

  // ðŸ”¹ Search
  function searchPosts(event) {
    event.preventDefault();
    const query = document.getElementById("searchInput").value.trim().toLowerCase();
    window.allPosts = window.allPosts.filter(item => item.file.toLowerCase().includes(query));
    currentPage = 1;
    displayPage(currentPage);
  }

  // ðŸ”¹ Manual reload
  function manualRefresh() { location.reload(); }

  // ðŸ”¹ Clear cache SW
  function clearServiceWorkerCache() {
    if ("caches" in window) {
      caches.keys().then(names => {
        for (let name of names) caches.delete(name);
      }).then(() => {
        alert("Cache berhasil dibersihkan. Halaman akan dimuat ulang.");
        location.reload(true);
      });
    }
  }

  function toggleMenu() { document.getElementById("navMenu").classList.toggle("active"); }
</script>
</body>
</html>
